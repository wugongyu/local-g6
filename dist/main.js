!function(g){var I={};function C(A){var n;return(I[A]||(n=I[A]={i:A,l:!1,exports:{}},g[A].call(n.exports,n,n.exports,C),n.l=!0,n)).exports}C.m=g,C.c=I,C.d=function(g,I,A){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:A})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var A=Object.create(null);if(C.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var n in g)C.d(A,n,function(I){return g[I]}.bind(null,n));return A},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./jsForAntv3-0/behaviorConfig/hover-edge.js\nconst hoverEdgeConfig = eventBus => ({\n  getEvents() {\n    return {\n      'edge:mouseover': 'onMouseover',\n      'edge:mouseleave': 'onMouseleave',\n      \"edge:click\": \"onClick\"\n    };\n  },\n  onMouseover(e) {\n    const self = this;\n    const item = e.item;\n    const graph = self.graph;\n    if (item.hasState('selected')) {\n      return;\n    } else {\n      if (self.shouldUpdate.call(self, e)) {\n        graph.setItemState(item, 'hover', true);\n      }\n    }\n    graph.paint();\n  },\n  onMouseleave(e) {\n    const self = this;\n    const item = e.item;\n    const graph = self.graph;\n    const group = item.getContainer();\n    group.find(g => {\n      if (g._attrs.isInPoint || g._attrs.isOutPoint) {\n        g.attr(\"fill\", \"#fff\");\n      }\n    });\n    if (self.shouldUpdate.call(self, e)) {\n      if (!item.hasState('selected')) graph.setItemState(item, 'hover', false);\n    }\n    graph.paint();\n  },\n  onClick(e) {\n    const self = this;\n    const item = e.item;\n    const graph = self.graph;\n    const autoPaint = graph.get('autoPaint');\n    graph.setAutoPaint(false);\n    const selectedNodes = graph.findAllByState('node', 'selected');\n    G6.Util.each(selectedNodes, node => {\n      graph.setItemState(node, 'selected', false);\n    });\n    if (!self.keydown || !self.multiple) {\n      const selected = graph.findAllByState('edge', 'selected');\n      G6.Util.each(selected, edge => {\n        if (edge !== item) {\n          graph.setItemState(edge, 'selected', false);\n        }\n      });\n    }\n    if (item.hasState('selected')) {\n      if (self.shouldUpdate.call(self, e)) {\n        graph.setItemState(item, 'selected', false);\n      }\n      eventBus.$emit('nodeselectchange', {\n        target: item,\n        select: false\n      });\n    } else {\n      if (self.shouldUpdate.call(self, e)) {\n        graph.setItemState(item, 'selected', true);\n      }\n      eventBus.$emit('nodeselectchange', {\n        target: item,\n        select: true\n      });\n    }\n    graph.setAutoPaint(autoPaint);\n    graph.paint();\n  }\n});\n/* harmony default export */ var hover_edge = (hoverEdgeConfig);\n// CONCATENATED MODULE: ./jsForAntv3-0/behaviorConfig/hover-node.js\n// 鼠标移入、移出、点击行为\nconst hoverNodeConfig = eventBus => ({\n  getEvents: function getEvents() {\n    return {\n      'node:mouseover': 'onMouseover',\n      'node:mouseleave': 'onMouseleave',\n      \"node:mousedown\": \"onMousedown\"\n    };\n  },\n  onMouseover: function onMouseover(e) {\n    const self = this;\n    const item = e.item;\n    const graph = self.graph;\n    const group = item.getContainer();\n    // 判断是否为可向外关联的锚点，是则鼠标移入时修改样式，且鼠标点击时增加连线行为\n    if (e.target._attrs.isOutPointOut || e.target._attrs.isOutPoint) {\n      group.find(g => {\n        if (g._attrs.isInPoint || g._attrs.isOutPoint) {\n          g.attr(\"fill\", \"#fff\");\n        }\n        if (g._attrs.isOutPoint) {\n          if (g._attrs.id === e.target._attrs.parent) {\n            group.find(gr => {\n              if (gr._attrs.id === g._attrs.id) {\n                gr.attr('fill', \"#1890ff\");\n                gr.attr('opacity', 1);\n              }\n            });\n          }\n          if (g._attrs.id === e.target._attrs.id) {\n            g.attr(\"fill\", \"#1890ff\");\n            g.attr('opacity', 1);\n          }\n        }\n      });\n      e.target.attr(\"cursor\", \"crosshair\");\n      this.graph.paint();\n    }\n    if (item.hasState('selected')) {\n      return;\n    } else {\n      if (self.shouldUpdate.call(self, e)) {\n        graph.setItemState(item, 'hover', true);\n      }\n    }\n    graph.paint();\n  },\n  onMouseleave: function onMouseleave(e) {\n    const self = this;\n    const item = e.item;\n    const graph = self.graph;\n    const group = item.getContainer();\n    group.find(g => {\n      if (g._attrs.isInPoint || g._attrs.isOutPoint) {\n        g.attr(\"fill\", \"#fff\");\n      }\n    });\n    if (self.shouldUpdate.call(self, e)) {\n      if (!item.hasState('selected')) graph.setItemState(item, 'hover', false);\n    }\n    graph.paint();\n  },\n  onMousedown: function onMousedown(e) {\n    if (e.target._attrs.isOutPoint || e.target._attrs.isOutPointOut) {\n      this.graph.setMode('addEdge');\n    } else {\n      this.graph.setMode('moveNode');\n    }\n  }\n});\n/* harmony default export */ var hover_node = (hoverNodeConfig);\n// CONCATENATED MODULE: ./jsForAntv3-0/behaviorConfig/utils.js\nfunction getUuid() {\n  var s = [];\n  var hexDigits = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  for (var i = 0; i < 36; i++) {\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n  }\n  s[14] = \"4\";\n  s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1);\n  s[8] = s[13] = s[18] = s[23] = \"-\";\n  let uuid = s.join(\"\");\n  return uuid;\n}\n\n// CONCATENATED MODULE: ./jsForAntv3-0/behaviorConfig/add-edge.js\n\n\n// 边的操作行为\nlet startPoint = null;\nlet startItem = null;\nlet endPoint = {};\nlet activeItem = null;\nlet curInPoint = null;\nconst addEdgeConfig = eventBus => ({\n  getEvents() {\n    return {\n      mousemove: 'onMousemove',\n      mouseup: 'onMouseup',\n      'node:mouseover': 'onMouseover',\n      'node:mouseleave': 'onMouseleave'\n    };\n  },\n  onMouseup(e) {\n    const item = e.item;\n    if (item && item.getType() === 'node') {\n      const group = item.getContainer();\n      if (e.target._attrs.isInPoint) {\n        const children = group._cfg.children;\n        children.map(child => {\n          if (child._attrs.isInPointOut && child._attrs.parent === e.target._attrs.id) {\n            activeItem = child;\n          }\n        });\n        curInPoint = e.target;\n      } else if (e.target._attrs.isInPointOut) {\n        activeItem = e.target;\n        const children = group._cfg.children;\n        children.map(child => {\n          if (child._attrs.isInPoint && child._attrs.id === e.target._attrs.parent) {\n            curInPoint = child;\n          }\n        });\n      }\n      if (activeItem) {\n        const endX = parseInt(curInPoint._attrs.x);\n        const endY = parseInt(curInPoint._attrs.y);\n        endPoint = {\n          x: endX,\n          y: endY\n        };\n        if (this.edge) {\n          this.graph.removeItem(this.edge);\n          const model = {\n            id: 'edge' + getUuid(),\n            source: startItem,\n            target: item,\n            sourceId: startItem._cfg.id,\n            targetId: item._cfg.id,\n            start: startPoint,\n            end: endPoint,\n            shape: 'customEdge',\n            type: 'edge'\n          };\n          eventBus.$emit('addItem', model);\n        }\n      } else {\n        if (this.edge) this.graph.removeItem(this.edge);\n      }\n    } else {\n      if (this.edge) this.graph.removeItem(this.edge);\n    }\n    this.graph.find(\"node\", node => {\n      const group = node.get('group');\n      const children = group._cfg.children;\n      children.map(child => {\n        if (child._attrs.isInPointOut) {\n          child.attr(\"opacity\", \"0\");\n        }\n        if (child._attrs.isInPoint) {\n          child.attr(\"opacity\", \"0\");\n        }\n        if (child._attrs.isOutPoint) {\n          child.attr(\"opacity\", \"0\");\n          child.attr(\"fill\", \"#fff\");\n        }\n      });\n    });\n    if (startItem) {\n      this.graph.setItemState(startItem, 'hover', false);\n    }\n    this.graph.paint();\n    startPoint = null;\n    startItem = null;\n    endPoint = {};\n    activeItem = null;\n    curInPoint = null;\n    this.graph.setMode('default');\n  },\n  onMousemove(e) {\n    const item = e.item;\n    if (!startPoint) {\n      this.graph.find(\"node\", node => {\n        const group = node.get('group');\n        const children = group._cfg.children;\n        children.map(child => {\n          if (child._attrs.isInPointOut) {\n            child.attr(\"opacity\", \"0.3\");\n          }\n          if (child._attrs.isInPoint) {\n            child.attr(\"opacity\", \"1\");\n          }\n        });\n      });\n      const startX = parseInt(e.target._attrs.x);\n      const startY = parseInt(e.target._attrs.y);\n      startPoint = {\n        x: startX,\n        y: startY\n      };\n      startItem = item;\n      this.edge = this.graph.addItem('edge', {\n        source: item,\n        target: item,\n        start: startPoint,\n        end: startPoint,\n        shape: 'link-edge'\n      });\n    } else {\n      const point = {\n        x: e.x,\n        y: e.y\n      };\n      if (this.edge) {\n        // 增加边的过程中，移动时边跟着移动\n        this.graph.updateItem(this.edge, {\n          //  start: startPoint,\n          target: point\n        });\n      }\n    }\n  },\n  onMouseover(e) {\n    const item = e.item;\n    if (item && item.getType() === 'node') {\n      if (e.target._attrs.isInPointOut && !this.hasTran) {\n        this.hasTran = true;\n        e.target.transform([['t', 0, 3], ['s', 1.2, 1.2]]);\n      }\n      this.graph.paint();\n    }\n  },\n  onMouseleave() {\n    this.graph.find(\"node\", node => {\n      const group = node.get('group');\n      const children = group._cfg.children;\n      children.map(child => {\n        if (child._attrs.isInPointOut) {\n          child.resetMatrix();\n        }\n      });\n    });\n    this.hasTran = false;\n    this.graph.paint();\n  }\n});\n/* harmony default export */ var add_edge = (addEdgeConfig);\n// CONCATENATED MODULE: ./jsForAntv3-0/behaviorConfig/select-node.js\nconst selectNodeConfig = eventBus => ({\n  getDefaultCfg() {\n    return {\n      multiple: true,\n      keyCode: 16\n    };\n  },\n  getEvents() {\n    return {\n      'node:click': 'onClick',\n      'canvas:click': 'onCanvasClick',\n      'canvas:mouseover': 'onCanvasMouseover',\n      keyup: 'onKeyUp',\n      keydown: 'onKeyDown'\n    };\n  },\n  onClick(e) {\n    const self = this;\n    const item = e.item;\n    const graph = self.graph;\n    const autoPaint = graph.get('autoPaint');\n    graph.setAutoPaint(false);\n    const selectedEdges = graph.findAllByState('edge', 'selected');\n    G6.Util.each(selectedEdges, edge => {\n      graph.setItemState(edge, 'selected', false);\n    });\n    if (!self.keydown || !self.multiple) {\n      const selected = graph.findAllByState('node', 'selected');\n      G6.Util.each(selected, node => {\n        if (node !== item) {\n          graph.setItemState(node, 'selected', false);\n        }\n      });\n    }\n    if (item.hasState('selected')) {\n      if (self.shouldUpdate.call(self, e)) {\n        graph.setItemState(item, 'selected', false);\n      }\n      eventBus.$emit('nodeselectchange', {\n        target: item,\n        select: false\n      });\n    } else {\n      if (self.shouldUpdate.call(self, e)) {\n        graph.setItemState(item, 'selected', true);\n      }\n      eventBus.$emit('nodeselectchange', {\n        target: item,\n        select: true\n      });\n    }\n    graph.setAutoPaint(autoPaint);\n    graph.paint();\n  },\n  onCanvasClick() {\n    const graph = this.graph;\n    const autoPaint = graph.get('autoPaint');\n    graph.setAutoPaint(false);\n    const selected = graph.findAllByState('node', 'selected');\n    G6.Util.each(selected, node => {\n      graph.setItemState(node, 'selected', false);\n      eventBus.$emit('nodeselectchange', {\n        target: node,\n        select: false\n      });\n    });\n    const selectedEdges = graph.findAllByState('edge', 'selected');\n    G6.Util.each(selectedEdges, edge => {\n      graph.setItemState(edge, 'selected', false);\n      eventBus.$emit('nodeselectchange', {\n        target: edge,\n        select: false\n      });\n    });\n    graph.paint();\n    graph.setAutoPaint(autoPaint);\n  },\n  onCanvasMouseover() {\n    const graph = this.graph;\n    graph.paint();\n  },\n  onKeyDown(e) {\n    const code = e.keyCode || e.which;\n    if (code === this.keyCode) {\n      this.keydown = true;\n    } else {\n      this.keydown = false;\n    }\n  },\n  onKeyUp() {\n    this.keydown = false;\n  }\n});\n/* harmony default export */ var select_node = (selectNodeConfig);\n// CONCATENATED MODULE: ./jsForAntv3-0/behaviorConfig/keyboard.js\nconst keyboardConfig = eventBus => ({\n  getDefaultCfg() {\n    return {\n      backKeyCode: 8,\n      deleteKeyCode: 46\n    };\n  },\n  getEvents() {\n    return {\n      keyup: 'onKeyUp',\n      keydown: 'onKeyDown'\n    };\n  },\n  onKeyDown(e) {\n    console.log('in keyboard keydown');\n    const code = e.keyCode || e.which;\n    switch (code) {\n      case this.deleteKeyCode:\n      case this.backKeyCode:\n        eventBus.$emit('deleteItem');\n        break;\n      default:\n        break;\n    }\n  },\n  onKeyUp() {\n    this.keydown = false;\n  }\n});\n/* harmony default export */ var keyboard = (keyboardConfig);\n// CONCATENATED MODULE: ./jsForAntv3-0/behaviorConfig/behavior.js\n\n\n\n\n\nwindow.behaviors = {\n  'hover-node': hover_node,\n  'add-edge': add_edge,\n  'hover-edge': hover_edge,\n  'select-node': select_node,\n  'keyboard': keyboard\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzRm9yQW50djMtMC9iZWhhdmlvckNvbmZpZy9ob3Zlci1lZGdlLmpzP2RmYzAiLCJ3ZWJwYWNrOi8vLy4vanNGb3JBbnR2My0wL2JlaGF2aW9yQ29uZmlnL2hvdmVyLW5vZGUuanM/OWEzNiIsIndlYnBhY2s6Ly8vLi9qc0ZvckFudHYzLTAvYmVoYXZpb3JDb25maWcvdXRpbHMuanM/NGMzYiIsIndlYnBhY2s6Ly8vLi9qc0ZvckFudHYzLTAvYmVoYXZpb3JDb25maWcvYWRkLWVkZ2UuanM/YzI4OSIsIndlYnBhY2s6Ly8vLi9qc0ZvckFudHYzLTAvYmVoYXZpb3JDb25maWcvc2VsZWN0LW5vZGUuanM/MDJjMyIsIndlYnBhY2s6Ly8vLi9qc0ZvckFudHYzLTAvYmVoYXZpb3JDb25maWcva2V5Ym9hcmQuanM/Njk1MSIsIndlYnBhY2s6Ly8vLi9qc0ZvckFudHYzLTAvYmVoYXZpb3JDb25maWcvYmVoYXZpb3IuanM/ZDAzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBob3ZlckVkZ2VDb25maWcgPSAoZXZlbnRCdXMpID0+ICh7XG4gICAgZ2V0RXZlbnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ2VkZ2U6bW91c2VvdmVyJzogJ29uTW91c2VvdmVyJyxcbiAgICAgICAgICAgICdlZGdlOm1vdXNlbGVhdmUnOiAnb25Nb3VzZWxlYXZlJyxcbiAgICAgICAgICAgIFwiZWRnZTpjbGlja1wiOiBcIm9uQ2xpY2tcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIG9uTW91c2VvdmVyKGUpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBlLml0ZW07XG4gICAgICAgIGNvbnN0IGdyYXBoID0gc2VsZi5ncmFwaDtcbiAgICAgICAgaWYgKGl0ZW0uaGFzU3RhdGUoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNlbGYuc2hvdWxkVXBkYXRlLmNhbGwoc2VsZiwgZSkpIHtcbiAgICAgICAgICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUoaXRlbSwgJ2hvdmVyJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZ3JhcGgucGFpbnQoKTtcbiAgICB9LFxuICAgIG9uTW91c2VsZWF2ZShlKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCBpdGVtID0gZS5pdGVtO1xuICAgICAgICBjb25zdCBncmFwaCA9IHNlbGYuZ3JhcGg7XG4gICAgICAgIGNvbnN0IGdyb3VwID0gaXRlbS5nZXRDb250YWluZXIoKVxuICAgICAgICBncm91cC5maW5kKGcgPT4ge1xuICAgICAgICAgICAgaWYgKGcuX2F0dHJzLmlzSW5Qb2ludCB8fCBnLl9hdHRycy5pc091dFBvaW50KSB7XG4gICAgICAgICAgICAgICAgZy5hdHRyKFwiZmlsbFwiLCBcIiNmZmZcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzZWxmLnNob3VsZFVwZGF0ZS5jYWxsKHNlbGYsIGUpKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0uaGFzU3RhdGUoJ3NlbGVjdGVkJykpXG4gICAgICAgICAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKGl0ZW0sICdob3ZlcicsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBncmFwaC5wYWludCgpO1xuICAgIH0sXG4gICAgb25DbGljayhlKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCBpdGVtID0gZS5pdGVtO1xuICAgICAgICBjb25zdCBncmFwaCA9IHNlbGYuZ3JhcGg7XG4gICAgICAgIGNvbnN0IGF1dG9QYWludCA9IGdyYXBoLmdldCgnYXV0b1BhaW50Jyk7XG4gICAgICAgIGdyYXBoLnNldEF1dG9QYWludChmYWxzZSk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkTm9kZXMgPSBncmFwaC5maW5kQWxsQnlTdGF0ZSgnbm9kZScsICdzZWxlY3RlZCcpO1xuICAgICAgICBHNi5VdGlsLmVhY2goc2VsZWN0ZWROb2Rlcywgbm9kZSA9PiB7XG4gICAgICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUobm9kZSwgJ3NlbGVjdGVkJywgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFzZWxmLmtleWRvd24gfHwgIXNlbGYubXVsdGlwbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZ3JhcGguZmluZEFsbEJ5U3RhdGUoJ2VkZ2UnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIEc2LlV0aWwuZWFjaChzZWxlY3RlZCwgZWRnZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVkZ2UgIT09IGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKGVkZ2UsICdzZWxlY3RlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS5oYXNTdGF0ZSgnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuc2hvdWxkVXBkYXRlLmNhbGwoc2VsZiwgZSkpIHtcbiAgICAgICAgICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUoaXRlbSwgJ3NlbGVjdGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnRCdXMuJGVtaXQoJ25vZGVzZWxlY3RjaGFuZ2UnLCB7IHRhcmdldDogaXRlbSwgc2VsZWN0OiBmYWxzZSB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzZWxmLnNob3VsZFVwZGF0ZS5jYWxsKHNlbGYsIGUpKSB7XG4gICAgICAgICAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKGl0ZW0sICdzZWxlY3RlZCcsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnRCdXMuJGVtaXQoJ25vZGVzZWxlY3RjaGFuZ2UnLCB7IHRhcmdldDogaXRlbSwgc2VsZWN0OiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGdyYXBoLnNldEF1dG9QYWludChhdXRvUGFpbnQpO1xuICAgICAgICBncmFwaC5wYWludCgpO1xuICAgIH0sXG5cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBob3ZlckVkZ2VDb25maWc7XG4iLCJcclxuLy8g6byg5qCH56e75YWl44CB56e75Ye644CB54K55Ye76KGM5Li6XHJcbmNvbnN0IGhvdmVyTm9kZUNvbmZpZyA9IChldmVudEJ1cykgPT4gKHtcclxuICBnZXRFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgJ25vZGU6bW91c2VvdmVyJzogJ29uTW91c2VvdmVyJyxcclxuICAgICAgICAgICdub2RlOm1vdXNlbGVhdmUnOiAnb25Nb3VzZWxlYXZlJyxcclxuICAgICAgICAgIFwibm9kZTptb3VzZWRvd25cIjogXCJvbk1vdXNlZG93blwiXHJcbiAgICAgIH07XHJcbiAgfSxcclxuICBvbk1vdXNlb3ZlcjogZnVuY3Rpb24oZSkge1xyXG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgY29uc3QgaXRlbSA9IGUuaXRlbTtcclxuICAgICAgY29uc3QgZ3JhcGggPSBzZWxmLmdyYXBoO1xyXG4gICAgICBjb25zdCBncm91cCA9IGl0ZW0uZ2V0Q29udGFpbmVyKCk7XHJcbiAgICAgIC8vIOWIpOaWreaYr+WQpuS4uuWPr+WQkeWkluWFs+iBlOeahOmUmueCue+8jOaYr+WImem8oOagh+enu+WFpeaXtuS/ruaUueagt+W8j++8jOS4lOm8oOagh+eCueWHu+aXtuWinuWKoOi/nue6v+ihjOS4ulxyXG4gICAgICBpZiAoZS50YXJnZXQuX2F0dHJzLmlzT3V0UG9pbnRPdXQgfHwgZS50YXJnZXQuX2F0dHJzLmlzT3V0UG9pbnQpIHtcclxuICAgICAgICBncm91cC5maW5kKGcgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZy5fYXR0cnMuaXNJblBvaW50IHx8IGcuX2F0dHJzLmlzT3V0UG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIGcuYXR0cihcImZpbGxcIiwgXCIjZmZmXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGcuX2F0dHJzLmlzT3V0UG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChnLl9hdHRycy5pZCA9PT0gZS50YXJnZXQuX2F0dHJzLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLmZpbmQoZ3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3IuX2F0dHJzLmlkID09PSBnLl9hdHRycy5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3IuYXR0cignZmlsbCcsIFwiIzE4OTBmZlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3IuYXR0cignb3BhY2l0eScsMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5fYXR0cnMuaWQgPT09IGUudGFyZ2V0Ll9hdHRycy5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGcuYXR0cihcImZpbGxcIiwgXCIjMTg5MGZmXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZy5hdHRyKCdvcGFjaXR5JywxKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGUudGFyZ2V0LmF0dHIoXCJjdXJzb3JcIiwgXCJjcm9zc2hhaXJcIik7XHJcbiAgICAgICAgdGhpcy5ncmFwaC5wYWludCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpdGVtLmhhc1N0YXRlKCdzZWxlY3RlZCcpKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHNlbGYuc2hvdWxkVXBkYXRlLmNhbGwoc2VsZiwgZSkpIHtcclxuICAgICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShpdGVtLCAnaG92ZXInLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZ3JhcGgucGFpbnQoKTtcclxuICB9LFxyXG4gIG9uTW91c2VsZWF2ZTogZnVuY3Rpb24oZSkge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICBjb25zdCBpdGVtID0gZS5pdGVtO1xyXG4gICAgY29uc3QgZ3JhcGggPSBzZWxmLmdyYXBoO1xyXG4gICAgY29uc3QgZ3JvdXAgPSBpdGVtLmdldENvbnRhaW5lcigpXHJcbiAgICBncm91cC5maW5kKGcgPT4ge1xyXG4gICAgICAgIGlmIChnLl9hdHRycy5pc0luUG9pbnQgfHwgZy5fYXR0cnMuaXNPdXRQb2ludCkge1xyXG4gICAgICAgICAgICBnLmF0dHIoXCJmaWxsXCIsIFwiI2ZmZlwiKVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKHNlbGYuc2hvdWxkVXBkYXRlLmNhbGwoc2VsZiwgZSkpIHtcclxuICAgICAgICBpZighaXRlbS5oYXNTdGF0ZSgnc2VsZWN0ZWQnKSlcclxuICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUoaXRlbSwgJ2hvdmVyJywgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZ3JhcGgucGFpbnQoKTtcclxuICB9LFxyXG4gIG9uTW91c2Vkb3duOiBmdW5jdGlvbihlKSB7XHJcbiAgICBpZihlLnRhcmdldC5fYXR0cnMuaXNPdXRQb2ludCB8fGUudGFyZ2V0Ll9hdHRycy5pc091dFBvaW50T3V0KXtcclxuICAgICAgdGhpcy5ncmFwaC5zZXRNb2RlKCdhZGRFZGdlJylcclxuICAgIH1lbHNle1xyXG4gICAgICB0aGlzLmdyYXBoLnNldE1vZGUoJ21vdmVOb2RlJylcclxuICAgIH1cclxuICB9LFxyXG5cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBob3Zlck5vZGVDb25maWc7IiwiZnVuY3Rpb24gZ2V0VXVpZCgpIHtcclxuICB2YXIgcyA9IFtdO1xyXG4gIHZhciBoZXhEaWdpdHMgPSBcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAzNjsgaSsrKSB7XHJcbiAgICBzW2ldID0gaGV4RGlnaXRzLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAweDEwKSwgMSlcclxuICB9XHJcbiAgc1sxNF0gPSBcIjRcIlxyXG4gIHNbMTldID0gaGV4RGlnaXRzLnN1YnN0cigoc1sxOV0gJiAweDMpIHwgMHg4LCAxKVxyXG4gIHNbOF0gPSBzWzEzXSA9IHNbMThdID0gc1syM10gPSBcIi1cIlxyXG4gIGxldCB1dWlkID0gcy5qb2luKFwiXCIpXHJcbiAgcmV0dXJuIHV1aWQ7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGdldFV1aWQgfTsiLCJpbXBvcnQgeyBnZXRVdWlkIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG4vLyDovrnnmoTmk43kvZzooYzkuLpcclxubGV0IHN0YXJ0UG9pbnQgPSBudWxsO1xyXG5sZXQgc3RhcnRJdGVtID0gbnVsbDtcclxubGV0IGVuZFBvaW50ID0ge307XHJcbmxldCBhY3RpdmVJdGVtID0gbnVsbDtcclxubGV0IGN1ckluUG9pbnQgPSBudWxsO1xyXG5jb25zdCBhZGRFZGdlQ29uZmlnID0gKGV2ZW50QnVzKSA9PiAoe1xyXG4gIGdldEV2ZW50cygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbW91c2Vtb3ZlOiAnb25Nb3VzZW1vdmUnLFxyXG4gICAgICAgIG1vdXNldXA6ICdvbk1vdXNldXAnLFxyXG4gICAgICAgICdub2RlOm1vdXNlb3Zlcic6ICdvbk1vdXNlb3ZlcicsXHJcbiAgICAgICAgJ25vZGU6bW91c2VsZWF2ZSc6ICdvbk1vdXNlbGVhdmUnXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgb25Nb3VzZXVwKGUpIHtcclxuICAgIGNvbnN0IGl0ZW0gPSBlLml0ZW1cclxuICAgIGlmIChpdGVtICYmIGl0ZW0uZ2V0VHlwZSgpID09PSAnbm9kZScpIHtcclxuICAgICAgICBjb25zdCBncm91cCA9IGl0ZW0uZ2V0Q29udGFpbmVyKClcclxuICAgICAgICBpZiAoZS50YXJnZXQuX2F0dHJzLmlzSW5Qb2ludCkge1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGdyb3VwLl9jZmcuY2hpbGRyZW47XHJcbiAgICAgICAgICAgIGNoaWxkcmVuLm1hcChjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuX2F0dHJzLmlzSW5Qb2ludE91dCAmJiBjaGlsZC5fYXR0cnMucGFyZW50ID09PSBlLnRhcmdldC5fYXR0cnMuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVJdGVtID0gY2hpbGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGN1ckluUG9pbnQgPSBlLnRhcmdldFxyXG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuX2F0dHJzLmlzSW5Qb2ludE91dCkge1xyXG4gICAgICAgICAgICBhY3RpdmVJdGVtID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gZ3JvdXAuX2NmZy5jaGlsZHJlbjtcclxuICAgICAgICAgICAgY2hpbGRyZW4ubWFwKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5fYXR0cnMuaXNJblBvaW50ICYmIGNoaWxkLl9hdHRycy5pZCA9PT0gZS50YXJnZXQuX2F0dHJzLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckluUG9pbnQgPSBjaGlsZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcclxuICAgICAgICAgICAgY29uc3QgZW5kWCA9IHBhcnNlSW50KGN1ckluUG9pbnQuX2F0dHJzLngpXHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFkgPSBwYXJzZUludChjdXJJblBvaW50Ll9hdHRycy55KVxyXG4gICAgICAgICAgICBlbmRQb2ludCA9IHsgeDogZW5kWCwgeTogZW5kWSB9O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lZGdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoLnJlbW92ZUl0ZW0odGhpcy5lZGdlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZWRnZScgKyBnZXRVdWlkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzdGFydEl0ZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBpdGVtLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBzdGFydEl0ZW0uX2NmZy5pZCxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogaXRlbS5fY2ZnLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydFBvaW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogZW5kUG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGU6ICdjdXN0b21FZGdlJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZWRnZSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCdhZGRJdGVtJywgbW9kZWwpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lZGdlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmFwaC5yZW1vdmVJdGVtKHRoaXMuZWRnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5lZGdlKVxyXG4gICAgICAgICAgICB0aGlzLmdyYXBoLnJlbW92ZUl0ZW0odGhpcy5lZGdlKTtcclxuICAgIH1cclxuICAgIHRoaXMuZ3JhcGguZmluZChcIm5vZGVcIiwgbm9kZSA9PiB7XHJcbiAgICAgICAgY29uc3QgZ3JvdXAgPSBub2RlLmdldCgnZ3JvdXAnKVxyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gZ3JvdXAuX2NmZy5jaGlsZHJlblxyXG4gICAgICAgIGNoaWxkcmVuLm1hcChjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5fYXR0cnMuaXNJblBvaW50T3V0KSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5hdHRyKFwib3BhY2l0eVwiLCBcIjBcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hpbGQuX2F0dHJzLmlzSW5Qb2ludCkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuYXR0cihcIm9wYWNpdHlcIiwgXCIwXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNoaWxkLl9hdHRycy5pc091dFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5hdHRyKFwib3BhY2l0eVwiLCBcIjBcIilcclxuICAgICAgICAgICAgICAgIGNoaWxkLmF0dHIoXCJmaWxsXCIsIFwiI2ZmZlwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBpZiAoc3RhcnRJdGVtKSB7XHJcbiAgICAgICAgdGhpcy5ncmFwaC5zZXRJdGVtU3RhdGUoc3RhcnRJdGVtLCAnaG92ZXInLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ncmFwaC5wYWludCgpXHJcbiAgICBzdGFydFBvaW50ID0gbnVsbFxyXG4gICAgc3RhcnRJdGVtID0gbnVsbFxyXG4gICAgZW5kUG9pbnQgPSB7fVxyXG4gICAgYWN0aXZlSXRlbSA9IG51bGxcclxuICAgIGN1ckluUG9pbnQgPSBudWxsXHJcbiAgICB0aGlzLmdyYXBoLnNldE1vZGUoJ2RlZmF1bHQnKVxyXG4gIH0sXHJcbiAgb25Nb3VzZW1vdmUoZSkge1xyXG4gICAgY29uc3QgaXRlbSA9IGUuaXRlbVxyXG4gICAgaWYgKCFzdGFydFBvaW50KSB7XHJcbiAgICAgICAgdGhpcy5ncmFwaC5maW5kKFwibm9kZVwiLCBub2RlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBub2RlLmdldCgnZ3JvdXAnKVxyXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGdyb3VwLl9jZmcuY2hpbGRyZW5cclxuICAgICAgICAgICAgY2hpbGRyZW4ubWFwKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5fYXR0cnMuaXNJblBvaW50T3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuYXR0cihcIm9wYWNpdHlcIiwgXCIwLjNcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5fYXR0cnMuaXNJblBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuYXR0cihcIm9wYWNpdHlcIiwgXCIxXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBzdGFydFggPSBwYXJzZUludChlLnRhcmdldC5fYXR0cnMueClcclxuICAgICAgICBjb25zdCBzdGFydFkgPSBwYXJzZUludChlLnRhcmdldC5fYXR0cnMueSlcclxuICAgICAgICBzdGFydFBvaW50ID0geyB4OiBzdGFydFgsIHk6IHN0YXJ0WSB9O1xyXG4gICAgICAgIHN0YXJ0SXRlbSA9IGl0ZW1cclxuICAgICAgICB0aGlzLmVkZ2UgPSB0aGlzLmdyYXBoLmFkZEl0ZW0oJ2VkZ2UnLCB7XHJcbiAgICAgICAgICAgIHNvdXJjZTogaXRlbSxcclxuICAgICAgICAgICAgdGFyZ2V0OiBpdGVtLFxyXG4gICAgICAgICAgICBzdGFydDogc3RhcnRQb2ludCxcclxuICAgICAgICAgICAgZW5kOiBzdGFydFBvaW50LFxyXG4gICAgICAgICAgICBzaGFwZTogJ2xpbmstZWRnZSdcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgcG9pbnQgPSB7IHg6IGUueCwgeTogZS55IH07XHJcbiAgICAgICAgaWYgKHRoaXMuZWRnZSkge1xyXG4gICAgICAgICAgICAvLyDlop7liqDovrnnmoTov4fnqIvkuK3vvIznp7vliqjml7bovrnot5/nnYDnp7vliqhcclxuICAgICAgICAgICAgdGhpcy5ncmFwaC51cGRhdGVJdGVtKHRoaXMuZWRnZSwge1xyXG4gICAgICAgICAgICAgICAgLy8gIHN0YXJ0OiBzdGFydFBvaW50LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBwb2ludFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBvbk1vdXNlb3ZlcihlKSB7XHJcbiAgICBjb25zdCBpdGVtID0gZS5pdGVtXHJcbiAgICBpZiAoaXRlbSAmJiBpdGVtLmdldFR5cGUoKSA9PT0gJ25vZGUnKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0Ll9hdHRycy5pc0luUG9pbnRPdXQgJiYgIXRoaXMuaGFzVHJhbikge1xyXG4gICAgICAgICAgICB0aGlzLmhhc1RyYW4gPSB0cnVlXHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnRyYW5zZm9ybShbXHJcbiAgICAgICAgICAgICAgICBbJ3QnLCAwLCAzXSxcclxuICAgICAgICAgICAgICAgIFsncycsIDEuMiwgMS4yXSxcclxuICAgICAgICAgICAgXSlcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ncmFwaC5wYWludCgpXHJcbiAgICB9XHJcbiAgfSxcclxuICBvbk1vdXNlbGVhdmUoKSB7XHJcbiAgICB0aGlzLmdyYXBoLmZpbmQoXCJub2RlXCIsIG5vZGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IGdyb3VwID0gbm9kZS5nZXQoJ2dyb3VwJylcclxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGdyb3VwLl9jZmcuY2hpbGRyZW5cclxuICAgICAgICBjaGlsZHJlbi5tYXAoY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQuX2F0dHJzLmlzSW5Qb2ludE91dCkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQucmVzZXRNYXRyaXgoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICB0aGlzLmhhc1RyYW4gPSBmYWxzZVxyXG4gICAgdGhpcy5ncmFwaC5wYWludCgpXHJcbiAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFkZEVkZ2VDb25maWc7IiwiY29uc3Qgc2VsZWN0Tm9kZUNvbmZpZyA9IChldmVudEJ1cykgPT4gKHtcbiAgICBnZXREZWZhdWx0Q2ZnKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICBrZXlDb2RlOiAxNlxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZ2V0RXZlbnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ25vZGU6Y2xpY2snOiAnb25DbGljaycsXG4gICAgICAgICAgICAnY2FudmFzOmNsaWNrJzogJ29uQ2FudmFzQ2xpY2snLFxuICAgICAgICAgICAgJ2NhbnZhczptb3VzZW92ZXInOiAnb25DYW52YXNNb3VzZW92ZXInLFxuICAgICAgICAgICAga2V5dXA6ICdvbktleVVwJyxcbiAgICAgICAgICAgIGtleWRvd246ICdvbktleURvd24nXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBvbkNsaWNrKGUpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBlLml0ZW07XG4gICAgICAgIGNvbnN0IGdyYXBoID0gc2VsZi5ncmFwaDtcbiAgICAgICAgY29uc3QgYXV0b1BhaW50ID0gZ3JhcGguZ2V0KCdhdXRvUGFpbnQnKTtcbiAgICAgICAgZ3JhcGguc2V0QXV0b1BhaW50KGZhbHNlKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRFZGdlcyA9IGdyYXBoLmZpbmRBbGxCeVN0YXRlKCdlZGdlJywgJ3NlbGVjdGVkJyk7XG4gICAgICAgIEc2LlV0aWwuZWFjaChzZWxlY3RlZEVkZ2VzLCBlZGdlID0+IHtcbiAgICAgICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShlZGdlLCAnc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXNlbGYua2V5ZG93biB8fCAhc2VsZi5tdWx0aXBsZSkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBncmFwaC5maW5kQWxsQnlTdGF0ZSgnbm9kZScsICdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgRzYuVXRpbC5lYWNoKHNlbGVjdGVkLCBub2RlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSAhPT0gaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUobm9kZSwgJ3NlbGVjdGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLmhhc1N0YXRlKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5zaG91bGRVcGRhdGUuY2FsbChzZWxmLCBlKSkge1xuICAgICAgICAgICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShpdGVtLCAnc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgICBldmVudEJ1cy4kZW1pdCgnbm9kZXNlbGVjdGNoYW5nZScsIHsgdGFyZ2V0OiBpdGVtLCBzZWxlY3Q6IGZhbHNlIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNlbGYuc2hvdWxkVXBkYXRlLmNhbGwoc2VsZiwgZSkpIHtcbiAgICAgICAgICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUoaXRlbSwgJ3NlbGVjdGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudEJ1cy4kZW1pdCgnbm9kZXNlbGVjdGNoYW5nZScsIHsgdGFyZ2V0OiBpdGVtLCBzZWxlY3Q6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZ3JhcGguc2V0QXV0b1BhaW50KGF1dG9QYWludCk7XG4gICAgICAgIGdyYXBoLnBhaW50KCk7XG4gICAgfSxcbiAgICBvbkNhbnZhc0NsaWNrKCkge1xuICAgICAgICBjb25zdCBncmFwaCA9IHRoaXMuZ3JhcGg7XG4gICAgICAgIGNvbnN0IGF1dG9QYWludCA9IGdyYXBoLmdldCgnYXV0b1BhaW50Jyk7XG4gICAgICAgIGdyYXBoLnNldEF1dG9QYWludChmYWxzZSk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZ3JhcGguZmluZEFsbEJ5U3RhdGUoJ25vZGUnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgRzYuVXRpbC5lYWNoKHNlbGVjdGVkLCBub2RlID0+IHtcbiAgICAgICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShub2RlLCAnc2VsZWN0ZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICBldmVudEJ1cy4kZW1pdCgnbm9kZXNlbGVjdGNoYW5nZScsIHsgdGFyZ2V0OiBub2RlLCBzZWxlY3Q6IGZhbHNlIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZWxlY3RlZEVkZ2VzID0gZ3JhcGguZmluZEFsbEJ5U3RhdGUoJ2VkZ2UnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgRzYuVXRpbC5lYWNoKHNlbGVjdGVkRWRnZXMsIGVkZ2UgPT4ge1xuICAgICAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKGVkZ2UsICdzZWxlY3RlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgIGV2ZW50QnVzLiRlbWl0KCdub2Rlc2VsZWN0Y2hhbmdlJywgeyB0YXJnZXQ6IGVkZ2UsIHNlbGVjdDogZmFsc2UgfSk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgZ3JhcGgucGFpbnQoKTtcbiAgICAgICAgZ3JhcGguc2V0QXV0b1BhaW50KGF1dG9QYWludCk7XG4gICAgfSxcbiAgICBvbkNhbnZhc01vdXNlb3ZlcigpIHtcbiAgICAgICAgY29uc3QgZ3JhcGggPSB0aGlzLmdyYXBoO1xuICAgICAgICBncmFwaC5wYWludCgpO1xuICAgIH0sXG4gICAgb25LZXlEb3duKGUpIHtcbiAgICAgICAgY29uc3QgY29kZSA9IGUua2V5Q29kZSB8fCBlLndoaWNoO1xuICAgICAgICBpZiAoY29kZSA9PT0gdGhpcy5rZXlDb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmtleWRvd24gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5rZXlkb3duID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uS2V5VXAoKSB7XG4gICAgICAgIHRoaXMua2V5ZG93biA9IGZhbHNlO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBzZWxlY3ROb2RlQ29uZmlnO1xuIiwiY29uc3Qga2V5Ym9hcmRDb25maWcgPSAoZXZlbnRCdXMpID0+ICh7XG4gICAgZ2V0RGVmYXVsdENmZygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJhY2tLZXlDb2RlOiA4LFxuICAgICAgICAgICAgZGVsZXRlS2V5Q29kZTogNDZcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldEV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleXVwOiAnb25LZXlVcCcsXG4gICAgICAgICAgICBrZXlkb3duOiAnb25LZXlEb3duJ1xuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBvbktleURvd24oZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnaW4ga2V5Ym9hcmQga2V5ZG93bicpXG4gICAgICAgIGNvbnN0IGNvZGUgPSBlLmtleUNvZGUgfHwgZS53aGljaDtcbiAgICAgICAgc3dpdGNoIChjb2RlKSB7XG4gICAgICAgICAgICBjYXNlIHRoaXMuZGVsZXRlS2V5Q29kZTpcbiAgICAgICAgICAgIGNhc2UgdGhpcy5iYWNrS2V5Q29kZTpcbiAgICAgICAgICAgICAgICBldmVudEJ1cy4kZW1pdCgnZGVsZXRlSXRlbScpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbktleVVwKCkge1xuICAgICAgICB0aGlzLmtleWRvd24gPSBmYWxzZTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQga2V5Ym9hcmRDb25maWc7XG4iLCJpbXBvcnQgaG92ZXJFZGdlQ29uZmlnIGZyb20gJy4vaG92ZXItZWRnZSc7XHJcbmltcG9ydCBob3Zlck5vZGVDb25maWcgZnJvbSAnLi9ob3Zlci1ub2RlJztcclxuaW1wb3J0IGFkZEVkZ2VDb25maWcgZnJvbSAnLi9hZGQtZWRnZSc7XHJcbmltcG9ydCBzZWxlY3ROb2RlQ29uZmlnIGZyb20gJy4vc2VsZWN0LW5vZGUnO1xyXG5pbXBvcnQga2V5Ym9hcmRDb25maWcgZnJvbSAnLi9rZXlib2FyZCc7XHJcblxyXG53aW5kb3cuYmVoYXZpb3JzID0ge1xyXG4gICdob3Zlci1ub2RlJzogaG92ZXJOb2RlQ29uZmlnLFxyXG4gICdhZGQtZWRnZSc6IGFkZEVkZ2VDb25maWcsXHJcbiAgJ2hvdmVyLWVkZ2UnOiBob3ZlckVkZ2VDb25maWcsXHJcbiAgJ3NlbGVjdC1ub2RlJzogc2VsZWN0Tm9kZUNvbmZpZyxcclxuICAna2V5Ym9hcmQnOiBrZXlib2FyZENvbmZpZyxcclxufSJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOztBQ3ZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FDOUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQ3JGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")}]);